#include <stdio.h>
#include <stdlib.h>
#include <locale.h>

int main()
{
FILE *step;
setlocale(0,"");
unsigned char text [10000];
char way [50];
int key;
int i;
int helper;
printf("Введите полный путь файла с расширением:");
scanf("%s",&way);
step = fopen(way, "r+");
if ( NULL != fgets (text,150,step) ) {
    printf("%s",text);
                                       }

printf("\n");
printf("Введите ключ:");
scanf("%d",&key);
if (key < 0) {
do {
printf("Значение не допустимо.Повторите:");
scanf("%d",&key);}
while (key < 0); }
if (key >= 0) {
for (i = 0;i < strlen(text);) {
    if (((text[i] > ' ') && (text[i] < 'A')) || ((text[i] > 'z') && (text[i] < 255))) {
            printf ("%c",text[i]);
          }
    if ((text[i] == ' ') && (i < strlen(text))) {
            printf ("%c",text[i]);
          }
    if (text[i] >= 'A' && text[i] <= 'Z') {
        helper = key/25;
        text[i] = text[i] + key - 25*helper;

    if (text[i] > 'Z') {
        text[i] = text[i] - 'Z' + 'A' - 1;
                       }
            printf ("%c",text[i]);
                                          }
    if (text[i] >= 'a' && text[i] <= 'z') {
        helper = key/25;
        text[i] = text[i] + key - 25*helper;

        if (text[i] > 'z') {
        text[i] = text[i] - 'z' + 'a' - 1;
                       }
            printf ("%c",text[i]);
                                          }
          i++;

                      }
    }
    return 0;

}
